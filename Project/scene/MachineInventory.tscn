[gd_scene load_steps=17 format=2]

[ext_resource path="res://textures/gui/inv/machine_arrow_off.png" type="Texture" id=1]
[ext_resource path="res://textures/gui/inv/machine_inv.png" type="Texture" id=2]
[ext_resource path="res://textures/gui/inv/machine_arrow_on.png" type="Texture" id=3]
[ext_resource path="res://textures/gui/inv/machine_inv_slot.png" type="Texture" id=4]
[ext_resource path="res://gdstuff/inventory/exit.gd" type="Script" id=5]
[ext_resource path="res://scene/Inv.gd" type="Script" id=6]
[ext_resource path="res://gdstuff/inventory/setinvpos.gd" type="Script" id=7]
[ext_resource path="res://other/ButtonGui.tres" type="StyleBox" id=8]
[ext_resource path="res://other/ButtonGuiPressed.tres" type="StyleBox" id=9]

[sub_resource type="GDScript" id=10]
script/source = "extends NinePatchRect

func _ready():
	texture = get_tree().current_scene.load_texture(\"textures/gui/inv/machine_inv_slot.png\")
"

[sub_resource type="GDScript" id=6]
resource_local_to_scene = true
script/source = "extends TextureRect

var slotdata

func _process(_delta):
	slotdata = get_parent().get_parent().get_parent().get_parent().get_parent().get_meta(\"metadata\").items.slot2
	if slotdata.amount == 0 || slotdata.amount == null:
		get_parent().get_node(\"amount\").text = str(\"\")
	else:
		get_parent().get_node(\"amount\").text = str(slotdata.amount)
	if slotdata.denom == null || slotdata.icon == null:
		texture = null
		return
	texture = get_tree().current_scene.load_texture(slotdata.icon)
	texture.set_flags(0)
	rect_scale = Vector2(32/texture.get_size().x, 32/texture.get_size().y)
	set_size(Vector2(32, 32))
"

[sub_resource type="GDScript" id=9]
script/source = "extends NinePatchRect

func _ready():
	texture = get_tree().current_scene.load_texture(\"textures/gui/inv/machine_inv_slot.png\")
"

[sub_resource type="GDScript" id=5]
resource_local_to_scene = true
script/source = "extends TextureRect

var slotdata

func _process(_delta):
	slotdata = get_parent().get_parent().get_parent().get_parent().get_parent().get_meta(\"metadata\").items.slot1
	if slotdata.amount == 0 || slotdata.amount == null:
		get_parent().get_node(\"amount\").text = str(\"\")
	else:
		get_parent().get_node(\"amount\").text = str(slotdata.amount)
	if slotdata.denom == null || slotdata.icon == null:
		texture = null
		return
	texture = get_tree().current_scene.load_texture(slotdata.icon)
	texture.set_flags(0)
	rect_scale = Vector2(32/texture.get_size().x, 32/texture.get_size().y)
	set_size(Vector2(32, 32))
"

[sub_resource type="GDScript" id=8]
script/source = "extends NinePatchRect

func _ready():
	texture = get_tree().current_scene.load_texture(\"textures/gui/inv/machine_inv_slot.png\")
"

[sub_resource type="GDScript" id=7]
script/source = "extends TextureRect

func _process(_delta):
	var slotone = get_node(\"../../Slot1/Item1\")
	match slotone.slotdata.denom:
		\"flush_sit\", \"bop\":
			texture = get_tree().current_scene.load_texture(\"textures/items/bop.png\")
			texture.set_flags(0)
			rect_scale = Vector2(32/texture.get_size().x, 32/texture.get_size().y)
			set_size(Vector2(32, 32))
		null:
			texture = null
"

[sub_resource type="GDScript" id=3]
resource_local_to_scene = true
script/source = "extends TextureProgress

func _ready():
	texture_under = get_tree().current_scene.load_texture(\"textures/gui/inv/machine_arrow_off.png\")
	texture_progress = get_tree().current_scene.load_texture(\"textures/gui/inv/machine_arrow_on.png\")
	
func _process(_delta):
	if get_parent().get_parent().get_parent().get_parent().get_node(\"ConvertTimer\").is_stopped():
		value = 0
		return
	match stepify(get_parent().get_parent().get_parent().get_parent().get_node(\"ConvertTimer\").time_left * 5, 0.1):
		5.0:
			value = 0
		4.5:
			value = 0.5
		4.0:
			value = 1
		3.5:
			value = 1.5
		3.0:
			value = 2
		2.5:
			value = 2.5
		2.0:
			value = 3
		1.5:
			value = 3.5
		1.0:
			value = 4
		0.5:
			value = 4.5
		0.0:
			value = 5
		
"

[node name="CanvasLayer" type="CanvasLayer"]
follow_viewport_enable = true

[node name="GUI" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = -768.0
margin_bottom = -440.0
script = ExtResource( 7 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Inv" type="NinePatchRect" parent="GUI"]
margin_right = 256.0
margin_bottom = 160.0
size_flags_horizontal = 0
size_flags_vertical = 0
texture = ExtResource( 2 )
region_rect = Rect2( 0, 0, 64, 64 )
patch_margin_left = 51
patch_margin_top = 47
patch_margin_right = 51
patch_margin_bottom = 51
script = ExtResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot2" type="NinePatchRect" parent="GUI/Inv"]
margin_left = 24.0
margin_top = 56.0
margin_right = 72.0
margin_bottom = 120.0
texture = ExtResource( 4 )
patch_margin_left = 13
patch_margin_top = 13
patch_margin_right = 13
patch_margin_bottom = 17
axis_stretch_horizontal = 1
axis_stretch_vertical = 1
script = SubResource( 10 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Item2" type="TextureRect" parent="GUI/Inv/Slot2"]
anchor_left = 0.5
anchor_top = 0.375
anchor_right = 0.5
anchor_bottom = 0.375
margin_left = -16.0
margin_top = -16.0
margin_right = 16.0
margin_bottom = 16.0
rect_min_size = Vector2( 32, 32 )
stretch_mode = 1
script = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="amount" type="Label" parent="GUI/Inv/Slot2"]
anchor_left = 0.5
anchor_top = 0.937
anchor_right = 0.5
anchor_bottom = 0.937
margin_left = -24.0
margin_top = -13.968
margin_right = 24.0
margin_bottom = 0.0319977
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 1 )
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot1" type="NinePatchRect" parent="GUI/Inv"]
margin_left = 80.0
margin_top = 56.0
margin_right = 128.0
margin_bottom = 120.0
rect_pivot_offset = Vector2( 24, 40 )
texture = ExtResource( 4 )
patch_margin_left = 13
patch_margin_top = 13
patch_margin_right = 13
patch_margin_bottom = 17
axis_stretch_horizontal = 1
axis_stretch_vertical = 1
script = SubResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Item1" type="TextureRect" parent="GUI/Inv/Slot1"]
anchor_left = 0.5
anchor_top = 0.375
anchor_right = 0.5
anchor_bottom = 0.375
margin_left = -16.0
margin_top = -16.0
margin_right = 16.0
margin_bottom = 16.0
rect_min_size = Vector2( 32, 32 )
script = SubResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="amount" type="Label" parent="GUI/Inv/Slot1"]
anchor_left = 0.5
anchor_top = 0.937
anchor_right = 0.5
anchor_bottom = 0.937
margin_left = -24.0
margin_top = -13.968
margin_right = 24.0
margin_bottom = 0.0319977
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 1 )
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Output" type="NinePatchRect" parent="GUI/Inv"]
margin_left = 184.0
margin_top = 64.0
margin_right = 232.0
margin_bottom = 112.0
texture = ExtResource( 4 )
patch_margin_left = 13
patch_margin_top = 13
patch_margin_right = 13
patch_margin_bottom = 17
axis_stretch_horizontal = 1
axis_stretch_vertical = 1
script = SubResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ItemOut" type="TextureRect" parent="GUI/Inv/Output"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -16.0
margin_top = -16.0
margin_right = 16.0
margin_bottom = 16.0
script = SubResource( 7 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureProgress" type="TextureProgress" parent="GUI/Inv"]
margin_left = 140.0
margin_top = 72.0
margin_right = 172.0
margin_bottom = 104.0
max_value = 5.0
step = 0.5
allow_greater = true
allow_lesser = true
texture_under = ExtResource( 1 )
texture_progress = ExtResource( 3 )
script = SubResource( 3 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="GUI/Inv"]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -53.0
margin_bottom = 46.0
custom_styles/hover = ExtResource( 8 )
custom_styles/pressed = ExtResource( 9 )
custom_styles/normal = ExtResource( 8 )
text = "Exit"
script = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}
